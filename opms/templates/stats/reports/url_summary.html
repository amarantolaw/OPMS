{% extends "stats/base.html" %}
{% block head %}
    <script src="/static/scripts/jquery-1.6.4.min.js"></script>
    <script src="/static/scripts/jquery.tablesorter.min.js"></script>
    <script src="/static/scripts/jquery-ui-1.8.13.min.js"></script>
{% endblock %}

{% block title %}Summary Data from URL Monitoring{% endblock %}

{% block navbar %}
<div id="mainnav">
    <h2>Main sections</h2>
    <ul class="level-1">
        <li><a href="/">Home</a></li>
        <li><a href="/admin/">Admin</a></li>
        <li><a href="/ffm/">Files &amp; Feeds</a></li>
        <li><a href="/stats/" class="currentsection">Statistics</a></li>
    </ul>
</div>
<div id="mainnav2">
    <h3>Sub sections for Statistics</h3>
    <ul class="level-2">
        <li><span class="youarehere">URL Monitoring</span></li>
        <li><a href="/stats/report/summary/">Summary</a></li>
        <li><a href="/stats/report/summary/feeds/">Feeds</a></li>
    </ul>
</div>
{% endblock %}

{% block breadcrumb %}&gt; <a href="/stats/">Statistics</a> &gt; <a href="/stats/report/urlmonitoring/">URL Monitoring Summary</a>{% endblock %}

{% block content %}
<h2>URL Reporting</h2>

{% if summary_data %}
<h3>Data visualisation</h3>
<script>
$(document).ready(function()
    {
        $("#summaryTable").tablesorter( {sortList: [[0,1]]} );
    }
);
</script>
{% if url_id %}
<p><img src="/stats/graph/urlmonitoring/url_by_time/url_id.png" /><br />
    <a href="/stats/graph/urlmonitoring/url_by_time/url_id.png?dpi=300">[Print Version]</a> <a href="/stats/graph/urlmonitoring/url_by_time/url_id.png?dpi=600">[High Resolution]</a></p>
{% endif %}

<table id="summaryTable" class="tablesorter">
    <thead>
        <tr>
            <th>Time of Scan</th>
            <th>Task Comment</th>
            <th>URL</th>
            <th>Iteration</th>
            <th>Time of Request</th>
            <th>TTFB</th>
            <th>TTLB</th>
        </tr>
    </thead>
    <tbody>
    {% for row in summary_data %}
        <tr>
            <td><a href="/stats/report/urlmonitoring/task/{{ row.task.id }}">{{ row.task.time_of_scan|date:"Y-m-d h:m:s" }}</a></td>
            <td>{{ row.task.comment }}</td>
{#            <td>{{ row.week_ending|date:"Y-m-d" }}</td>#}
            <td><a href="/stats/report/urlmonitoring/url/{{ row.task.url.id }}">{{ row.task.url.url }}</a></td>
{#            <td class="{% if row.total_track_downloads_change >= 0 %}positive{% else %}negative{% endif %}">{{ row.total_track_downloads_change }}</td>#}
            <td>{{ row.iteration }}</td>
            <td>{{ row.time_of_request }}</td>
            <td>{{ row.ttfb }}</td>
            <td>{{ row.ttlb }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% else %}
    <p>No summary data to display here</p>
{% endif %}

{% endblock %}