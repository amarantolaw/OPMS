{% extends "base.html" %}
{% load static sitetree %}

{% block sidebar %}
{% sitetree_menu from "opmstree" include "top-monitoring" template "sitetree/navlist.html" %}
{% endblock %}

{% block content %}
{% if error != '' %}
    <h1>ERROR: {{ error }}</h1>
{% else %}
    <div class="row-fluid">
    {% if added %}
        Your event has been added to the database. You can add another event using the form below, or you can <a href="..">return</a> to the home page.
    {% else %}
        Add a new event using the form below:
    {% endif %}
    </div>
    <form action="/monitoring/feedback/event/" method="post">
    {% csrf_token %}
        <input type="hidden" name="add" value="1 /">
    <div class="row-fluid">
        <div class="span1">Title:</div><div class="span2"><input type="text" name="title" value="{{ event.title }}" maxlength=20/></div>
    </div>
    <div class="row-fluid">
        <div class="span1">Event:</div><div class="span2">
        <textarea type="text" name="detail">{{ event.detail }}</textarea></div>
    </div>
    <div class="row-fluid">
        <div class="span1">Date:</div><div class="span2"><input type="text" value="{{ event.date.day }}/{{ event.date.month }}/{{ event.date.year }}" data-date-format="dd/mm/yyyy" id="dp" name="date" class="input-small"/></div>
    </div>
    <div class="row-fluid">
        <div class="span1">Category:</div><div class="span2"><select name="category_id">
        {% for c in categories %}
            {% if c.id == event.category.id %}
                <option value="{{ c.id }}" selected="selected">{{ c.description }}</option>
            {% else %}
                <option value="{{ c.id }}">{{ c.description }}</option>
            {% endif %}
        {% endfor %}
        </select>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span1"></div><div class="span2"><input type="submit" value="Submit" /> <input type="reset" value="Reset"></div>
    </div>
{% endif %}
</form>
<script>
    $('#dp').datepicker()
</script>
{% endblock %}